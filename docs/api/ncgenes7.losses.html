

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ncgenes7.losses package &mdash; ncgenes7 v0.10.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/icon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ncgenes7.metrics package" href="ncgenes7.metrics.html" />
    <link rel="prev" title="ncgenes7.learning_rate_manipulators package" href="ncgenes7.learning_rate_manipulators.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> ncgenes7
          

          
            
            <img src="../_static/icon.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.10.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../Introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ProjectSamples.html">Sample projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Contribution.html">Contribution</a></li>
</ul>
<p class="caption"><span class="caption-text">API:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="ncgenes7.augmentations.html">ncgenes7.augmentations package</a></li>
<li class="toctree-l1"><a class="reference internal" href="ncgenes7.callbacks.html">ncgenes7.callbacks package</a></li>
<li class="toctree-l1"><a class="reference internal" href="ncgenes7.data_feeders.html">ncgenes7.data_feeders package</a></li>
<li class="toctree-l1"><a class="reference internal" href="ncgenes7.data_fields.html">ncgenes7.data_fields package</a></li>
<li class="toctree-l1"><a class="reference internal" href="ncgenes7.data_filters.html">ncgenes7.data_filters package</a></li>
<li class="toctree-l1"><a class="reference internal" href="ncgenes7.data_readers.html">ncgenes7.data_readers package</a></li>
<li class="toctree-l1"><a class="reference internal" href="ncgenes7.file_lists.html">ncgenes7.file_lists package</a></li>
<li class="toctree-l1"><a class="reference internal" href="ncgenes7.kpis.html">ncgenes7.kpis package</a></li>
<li class="toctree-l1"><a class="reference internal" href="ncgenes7.learning_rate_manipulators.html">ncgenes7.learning_rate_manipulators package</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">ncgenes7.losses package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-ncgenes7.losses.classification">ncgenes7.losses.classification module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-ncgenes7.losses.generic">ncgenes7.losses.generic module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-ncgenes7.losses.image">ncgenes7.losses.image module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-ncgenes7.losses.metric_learning">ncgenes7.losses.metric_learning module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ncgenes7-losses-object-detection-module">ncgenes7.losses.object_detection module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-ncgenes7.losses">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ncgenes7.metrics.html">ncgenes7.metrics package</a></li>
<li class="toctree-l1"><a class="reference internal" href="ncgenes7.plugins.html">ncgenes7.plugins package</a></li>
<li class="toctree-l1"><a class="reference internal" href="ncgenes7.plugins.cnns.html">ncgenes7.plugins.cnns package</a></li>
<li class="toctree-l1"><a class="reference internal" href="ncgenes7.plugins.object_detection.html">ncgenes7.plugins.object_detection package</a></li>
<li class="toctree-l1"><a class="reference internal" href="ncgenes7.plugins.preprocessing.html">ncgenes7.plugins.preprocessing package</a></li>
<li class="toctree-l1"><a class="reference internal" href="ncgenes7.plugins.utils.html">ncgenes7.plugins.utils package</a></li>
<li class="toctree-l1"><a class="reference internal" href="ncgenes7.postprocessors.html">ncgenes7.postprocessors package</a></li>
<li class="toctree-l1"><a class="reference internal" href="ncgenes7.summaries.html">ncgenes7.summaries package</a></li>
<li class="toctree-l1"><a class="reference internal" href="ncgenes7.third_party.html">ncgenes7.third_party package</a></li>
<li class="toctree-l1"><a class="reference internal" href="ncgenes7.third_party.object_detection.html">ncgenes7.third_party.object_detection package</a></li>
<li class="toctree-l1"><a class="reference internal" href="ncgenes7.utils.html">ncgenes7.utils package</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ncgenes7</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>ncgenes7.losses package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api/ncgenes7.losses.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ncgenes7-losses-package">
<h1>ncgenes7.losses package<a class="headerlink" href="#ncgenes7-losses-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-ncgenes7.losses.classification">
<span id="ncgenes7-losses-classification-module"></span><h2>ncgenes7.losses.classification module<a class="headerlink" href="#module-ncgenes7.losses.classification" title="Permalink to this headline">¶</a></h2>
<p>Implementation of classification losses which are not usable directly from
tf.losses</p>
<dl class="class">
<dt id="ncgenes7.losses.classification.ClassificationFocalLoss">
<em class="property">class </em><code class="sig-prename descclassname">ncgenes7.losses.classification.</code><code class="sig-name descname">ClassificationFocalLoss</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">gamma=2.0</em>, <em class="sig-param">alpha=1.0</em>, <em class="sig-param">**loss_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncgenes7/losses/classification.html#ClassificationFocalLoss"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncgenes7.losses.classification.ClassificationFocalLoss" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">nucleus7.model.loss.ModelLoss</span></code></p>
<p>Focal loss calculation for classification when there is imbalance in terms
of number of samples per class.</p>
<p>FocalLoss(pt)=-alpha * (1-pt)^(gamma) * log(pt)</p>
<p>Here gamma is focusing parameter and alpha is balancing parameter.
This implementation works for multi-classification.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>gamma</strong> – a focusing parameter which smoothly adjusts the rate at which easy
examples are down weighted
When gamma is zero, it is equivalent to normal cross entropy
Default is 2.0 as it is mentioned in paper because it works best.</p></li>
<li><p><strong>alpha</strong> – alpha value for balancing the focal loss</p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="ncgenes7.losses.classification.ClassificationFocalLoss.incoming_keys">
<code class="sig-name descname">incoming_keys</code><a class="headerlink" href="#ncgenes7.losses.classification.ClassificationFocalLoss.incoming_keys" title="Permalink to this definition">¶</a></dt>
<dd><ul class="simple">
<li><p>classification_softmax : softmax output of network in shape of
[bs, num_classes], tf.float32</p></li>
<li><p>groundtruth_classes : labels - one hot class label in shape
[bs, 1], tf.int32</p></li>
</ul>
</dd></dl>

<dl class="attribute">
<dt id="ncgenes7.losses.classification.ClassificationFocalLoss.generated_keys">
<code class="sig-name descname">generated_keys</code><a class="headerlink" href="#ncgenes7.losses.classification.ClassificationFocalLoss.generated_keys" title="Permalink to this definition">¶</a></dt>
<dd><ul class="simple">
<li><p>loss : calculated focal loss</p></li>
</ul>
</dd></dl>

<p class="rubric">References</p>
<p><a class="reference external" href="https://arxiv.org/pdf/1708.02002.pdf">https://arxiv.org/pdf/1708.02002.pdf</a></p>
<dl class="attribute">
<dt>
<code class="sig-name descname">generated_keys</code><em class="property"> = ['loss']</em></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">incoming_keys</code><em class="property"> = ['classification_softmax', 'groundtruth_classes']</em></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ncgenes7.losses.classification.ClassificationFocalLoss.process">
<code class="sig-name descname">process</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">classification_softmax</em>, <em class="sig-param">groundtruth_classes</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncgenes7/losses/classification.html#ClassificationFocalLoss.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncgenes7.losses.classification.ClassificationFocalLoss.process" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the loss given inputs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>inputs</strong> – dict with input tensors</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>loss values</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>loss</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-ncgenes7.losses.generic">
<span id="ncgenes7-losses-generic-module"></span><h2>ncgenes7.losses.generic module<a class="headerlink" href="#module-ncgenes7.losses.generic" title="Permalink to this headline">¶</a></h2>
<p>Implementation of generic ModelLoss</p>
<dl class="class">
<dt id="ncgenes7.losses.generic.GenericTFLoss">
<em class="property">class </em><code class="sig-prename descclassname">ncgenes7.losses.generic.</code><code class="sig-name descname">GenericTFLoss</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">tf_fun_name</em>, <em class="sig-param">arg_name_predictions='predictions'</em>, <em class="sig-param">arg_name_labels='labels'</em>, <em class="sig-param">tf_fun_kwargs=None</em>, <em class="sig-param">**loss_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncgenes7/losses/generic.html#GenericTFLoss"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncgenes7.losses.generic.GenericTFLoss" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">nucleus7.model.loss.ModelLoss</span></code></p>
<p>Generic tensorflow loss</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tf_fun_name</strong> – name tensorflow loss, e.g. <cite>absolute_difference</cite></p></li>
<li><p><strong>arg_name_predictions</strong> – which argument name do predictions have inside of tf function, e.g.
‘logits’ for ‘softmax_cross_entropy’ or ‘predictions’ (default) for
mean_squared_error</p></li>
<li><p><strong>arg_name_labels</strong> – which argument name do labels have inside of tf function, e.g.
‘onehot_labels’ for ‘softmax_cross_entropy’ or ‘labels’ (default)
for mean_squared_error</p></li>
<li><p><strong>tf_fun_kwargs</strong> – some additional parameters to tf_fun</p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="ncgenes7.losses.generic.GenericTFLoss.incoming_keys">
<code class="sig-name descname">incoming_keys</code><a class="headerlink" href="#ncgenes7.losses.generic.GenericTFLoss.incoming_keys" title="Permalink to this definition">¶</a></dt>
<dd><ul class="simple">
<li><p>predictions : predictions, e.g. logits, np.float</p></li>
<li><p>labels : labels,  np.float</p></li>
</ul>
</dd></dl>

<dl class="attribute">
<dt id="ncgenes7.losses.generic.GenericTFLoss.generated_keys">
<code class="sig-name descname">generated_keys</code><a class="headerlink" href="#ncgenes7.losses.generic.GenericTFLoss.generated_keys" title="Permalink to this definition">¶</a></dt>
<dd><ul class="simple">
<li><p>loss : calculated loss</p></li>
</ul>
</dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">generated_keys</code><em class="property"> = ['loss']</em></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">incoming_keys</code><em class="property"> = ['predictions', 'labels']</em></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ncgenes7.losses.generic.GenericTFLoss.process">
<code class="sig-name descname">process</code><span class="sig-paren">(</span><em class="sig-param">predictions</em>, <em class="sig-param">labels</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncgenes7/losses/generic.html#GenericTFLoss.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncgenes7.losses.generic.GenericTFLoss.process" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the loss given inputs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>inputs</strong> – dict with input tensors</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>loss values</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>loss</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-ncgenes7.losses.image">
<span id="ncgenes7-losses-image-module"></span><h2>ncgenes7.losses.image module<a class="headerlink" href="#module-ncgenes7.losses.image" title="Permalink to this headline">¶</a></h2>
<p>Implementation of ModelLoss for image related tasks</p>
<dl class="class">
<dt id="ncgenes7.losses.image.SSIMWithResizedLabels">
<em class="property">class </em><code class="sig-prename descclassname">ncgenes7.losses.image.</code><code class="sig-name descname">SSIMWithResizedLabels</code><span class="sig-paren">(</span><em class="sig-param">max_value=1.0</em>, <em class="sig-param">**loss_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncgenes7/losses/image.html#SSIMWithResizedLabels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncgenes7.losses.image.SSIMWithResizedLabels" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">nucleus7.model.loss.ModelLoss</span></code></p>
<p>Structural Similarity Index (SSIM) for measuring image quality
when spatial dimensions of predictions
are not the same as labels. It will resize labels to predictions size.
Resizing is done by <code class="xref py py-func docutils literal notranslate"><span class="pre">tf.image.resize_nearest_neighbor()</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>max_value</strong> – dynamic range of the images (i.e., the difference between the maximum
the and minimum allowed values)</p>
</dd>
</dl>
<dl class="attribute">
<dt id="ncgenes7.losses.image.SSIMWithResizedLabels.incoming_keys">
<code class="sig-name descname">incoming_keys</code><a class="headerlink" href="#ncgenes7.losses.image.SSIMWithResizedLabels.incoming_keys" title="Permalink to this definition">¶</a></dt>
<dd><ul class="simple">
<li><p>predictions : predicted images, tf.float</p></li>
<li><p>labels : groundtruth images,  tf.float</p></li>
</ul>
</dd></dl>

<dl class="attribute">
<dt id="ncgenes7.losses.image.SSIMWithResizedLabels.generated_keys">
<code class="sig-name descname">generated_keys</code><a class="headerlink" href="#ncgenes7.losses.image.SSIMWithResizedLabels.generated_keys" title="Permalink to this definition">¶</a></dt>
<dd><ul class="simple">
<li><p>loss : calculated loss</p></li>
</ul>
</dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">generated_keys</code><em class="property"> = ['loss']</em></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">incoming_keys</code><em class="property"> = ['predictions', 'labels']</em></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ncgenes7.losses.image.SSIMWithResizedLabels.process">
<code class="sig-name descname">process</code><span class="sig-paren">(</span><em class="sig-param">predictions</em>, <em class="sig-param">labels</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncgenes7/losses/image.html#SSIMWithResizedLabels.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncgenes7.losses.image.SSIMWithResizedLabels.process" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the loss given inputs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>inputs</strong> – dict with input tensors</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>loss values</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>loss</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ncgenes7.losses.image.SoftmaxLossWithResizedLabels">
<em class="property">class </em><code class="sig-prename descclassname">ncgenes7.losses.image.</code><code class="sig-name descname">SoftmaxLossWithResizedLabels</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">loss_weights=None</em>, <em class="sig-param">exclude_from_total_loss=False</em>, <em class="sig-param">keys_to_exclude_from_sample_mask=None</em>, <em class="sig-param">**nucleotide_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncgenes7/losses/image.html#SoftmaxLossWithResizedLabels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncgenes7.losses.image.SoftmaxLossWithResizedLabels" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">nucleus7.model.loss.ModelLoss</span></code></p>
<p>Sparse softmax loss for case when spatial dimensions of predictions
are not the same as labels. It will resize labels to predictions size.
Resizing is done by <code class="xref py py-func docutils literal notranslate"><span class="pre">tf.image.resize_nearest_neighbor()</span></code></p>
<dl class="attribute">
<dt id="ncgenes7.losses.image.SoftmaxLossWithResizedLabels.incoming_keys">
<code class="sig-name descname">incoming_keys</code><a class="headerlink" href="#ncgenes7.losses.image.SoftmaxLossWithResizedLabels.incoming_keys" title="Permalink to this definition">¶</a></dt>
<dd><ul class="simple">
<li><p>logits : logits, np.float</p></li>
<li><p>labels : labels,  np.int32</p></li>
</ul>
</dd></dl>

<dl class="attribute">
<dt id="ncgenes7.losses.image.SoftmaxLossWithResizedLabels.generated_keys">
<code class="sig-name descname">generated_keys</code><a class="headerlink" href="#ncgenes7.losses.image.SoftmaxLossWithResizedLabels.generated_keys" title="Permalink to this definition">¶</a></dt>
<dd><ul class="simple">
<li><p>loss : calculated loss</p></li>
</ul>
</dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">generated_keys</code><em class="property"> = ['loss']</em></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">incoming_keys</code><em class="property"> = ['logits', 'labels']</em></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ncgenes7.losses.image.SoftmaxLossWithResizedLabels.process">
<code class="sig-name descname">process</code><span class="sig-paren">(</span><em class="sig-param">logits</em>, <em class="sig-param">labels</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncgenes7/losses/image.html#SoftmaxLossWithResizedLabels.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncgenes7.losses.image.SoftmaxLossWithResizedLabels.process" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the loss given inputs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>inputs</strong> – dict with input tensors</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>loss values</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>loss</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ncgenes7.losses.image.StereoDepthLoss">
<em class="property">class </em><code class="sig-prename descclassname">ncgenes7.losses.image.</code><code class="sig-name descname">StereoDepthLoss</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">use_2nd_order_gradients=False</em>, <em class="sig-param">loss_ssim_alpha=0.85</em>, <em class="sig-param">**loss_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncgenes7/losses/image.html#StereoDepthLoss"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncgenes7.losses.image.StereoDepthLoss" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">nucleus7.model.loss.ModelLoss</span></code></p>
<p>Loss for stereo depth estimation</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>use_2nd_order_gradients</strong> – if second order image gradient loss should be calculated</p></li>
<li><p><strong>loss_ssim_alpha</strong> – ssim reconstruction coefficient</p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="ncgenes7.losses.image.StereoDepthLoss.incoming_keys">
<code class="sig-name descname">incoming_keys</code><a class="headerlink" href="#ncgenes7.losses.image.StereoDepthLoss.incoming_keys" title="Permalink to this definition">¶</a></dt>
<dd><ul class="simple">
<li><p>images_left : left input image, {tf.float32, [tf.float32]*n},
[bs, h, w, num_channels]</p></li>
<li><p>images_right : right image, {tf.float32, [tf.float32]*n},
[bs, h, w, num_channels]</p></li>
<li><p>images_left_reconstructed : reconstructed left image,
{tf.float32, [tf.float32]*n}, [bs, h, w, num_channels]</p></li>
<li><p>images_right_reconstructed : reconstructed right image,
{tf.float32, [tf.float32]*n}, [bs, h, w, num_channels]</p></li>
<li><p>disparity_images_left : disparity for left image,
{tf.float32, [tf.float32]*n}, [bs, h, w, 1]</p></li>
<li><p>disparity_images_right : disparity to right image,
{tf.float32, [tf.float32]*n}, [bs, h, w, 1]</p></li>
<li><p>disparity_images_left_inverted : disparity reconstructed from right
disparity using left one as transformation,
{tf.float32, [tf.float32]*n}, [bs, h, w, 1]</p></li>
<li><p>disparity_images_right_inverted : disparity reconstructed from left
disparity using right one as transformation,
{tf.float32, [tf.float32]*n}, [bs, h, w, 1]</p></li>
</ul>
</dd></dl>

<dl class="attribute">
<dt id="ncgenes7.losses.image.StereoDepthLoss.generated_keys">
<code class="sig-name descname">generated_keys</code><a class="headerlink" href="#ncgenes7.losses.image.StereoDepthLoss.generated_keys" title="Permalink to this definition">¶</a></dt>
<dd><ul class="simple">
<li><p>loss_appearance_matching : matching of reconstruction</p></li>
<li><p>loss_disp_smoothness : disparity smoothness loss</p></li>
<li><p>loss_disp_consistency : disparity consistency</p></li>
<li><p>loss_disp_smoothness_2nd_order : (optional) second order
smoothness loss</p></li>
</ul>
</dd></dl>

<p class="rubric">References</p>
<dl class="simple">
<dt>loss_disp_smoothness, disp_consistency, appearance_matching</dt><dd><p><a class="reference external" href="https://arxiv.org/abs/1609.03677">https://arxiv.org/abs/1609.03677</a></p>
</dd>
<dt>disp_smoothness_2nd_order</dt><dd><p><a class="reference external" href="https://arxiv.org/abs/1704.07813">https://arxiv.org/abs/1704.07813</a></p>
</dd>
</dl>
<dl class="attribute">
<dt>
<code class="sig-name descname">generated_keys</code><em class="property"> = ['loss_appearance_matching', 'loss_disp_smoothness', 'loss_disp_consistency', 'loss_disp_smoothness_2nd_order']</em></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">incoming_keys</code><em class="property"> = ['images_left', 'images_right', 'images_left_reconstructed', 'images_right_reconstructed', 'disparity_images_left', 'disparity_images_right', 'disparity_images_left_inverted', 'disparity_images_right_inverted']</em></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ncgenes7.losses.image.StereoDepthLoss.process">
<code class="sig-name descname">process</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">images_left</em>, <em class="sig-param">images_right</em>, <em class="sig-param">images_left_reconstructed</em>, <em class="sig-param">images_right_reconstructed</em>, <em class="sig-param">disparity_images_left</em>, <em class="sig-param">disparity_images_right</em>, <em class="sig-param">disparity_images_left_inverted</em>, <em class="sig-param">disparity_images_right_inverted</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncgenes7/losses/image.html#StereoDepthLoss.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncgenes7.losses.image.StereoDepthLoss.process" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the loss given inputs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>inputs</strong> – dict with input tensors</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>loss values</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>loss</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-ncgenes7.losses.metric_learning">
<span id="ncgenes7-losses-metric-learning-module"></span><h2>ncgenes7.losses.metric_learning module<a class="headerlink" href="#module-ncgenes7.losses.metric_learning" title="Permalink to this headline">¶</a></h2>
<p>Losses for metric learning</p>
<dl class="class">
<dt id="ncgenes7.losses.metric_learning.ProxyEmbeddingLoss">
<em class="property">class </em><code class="sig-prename descclassname">ncgenes7.losses.metric_learning.</code><code class="sig-name descname">ProxyEmbeddingLoss</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">loss_weights=None</em>, <em class="sig-param">exclude_from_total_loss=False</em>, <em class="sig-param">keys_to_exclude_from_sample_mask=None</em>, <em class="sig-param">**nucleotide_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncgenes7/losses/metric_learning.html#ProxyEmbeddingLoss"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncgenes7.losses.metric_learning.ProxyEmbeddingLoss" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">nucleus7.model.loss.ModelLoss</span></code></p>
<p>Loss metric learning with proxy embedding</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>num_proxies</strong> – Number of proxies to use. Will raise error if left at default value</p>
</dd>
</dl>
<dl class="attribute">
<dt id="ncgenes7.losses.metric_learning.ProxyEmbeddingLoss.incoming_keys">
<code class="sig-name descname">incoming_keys</code><a class="headerlink" href="#ncgenes7.losses.metric_learning.ProxyEmbeddingLoss.incoming_keys" title="Permalink to this definition">¶</a></dt>
<dd><ul class="simple">
<li><p>proxy_estimate : calculated embedding,
{tf.float32, [tf.float32]*n}, either [bs, embedding_dim] or
[bs, 4, embedding_dim]</p></li>
<li><p>origins : (optional), numeric origin of the data
(‘class label’), {tf.int32, [tf.int32]*n}, [bs]</p></li>
<li><p>proxies : (optional), used proxies, {tf.float32, [tf.float32]*n},
[number_proxies, dimension_proxy]</p></li>
</ul>
</dd></dl>

<dl class="attribute">
<dt id="ncgenes7.losses.metric_learning.ProxyEmbeddingLoss.generated_keys">
<code class="sig-name descname">generated_keys</code><a class="headerlink" href="#ncgenes7.losses.metric_learning.ProxyEmbeddingLoss.generated_keys" title="Permalink to this definition">¶</a></dt>
<dd><ul class="simple">
<li><p>loss_proxy_embedding : proxy embedding loss</p></li>
</ul>
</dd></dl>

<p class="rubric">References</p>
<p>“No Fuss Distance Metric Learning using Proxies”, Yair Movshovitz-Attias,
Alexander Toshev, Thomas K. Leung, Sergey Ioffe, Saurabh Singh,
arXiv:1703.07464</p>
<dl class="attribute">
<dt>
<code class="sig-name descname">generated_keys</code><em class="property"> = ['loss_proxy_embedding']</em></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">incoming_keys</code><em class="property"> = ['proxy_estimate', '_origins', '_proxies']</em></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ncgenes7.losses.metric_learning.ProxyEmbeddingLoss.process">
<code class="sig-name descname">process</code><span class="sig-paren">(</span><em class="sig-param">proxy_estimate</em>, <em class="sig-param">origins=None</em>, <em class="sig-param">proxies=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ncgenes7/losses/metric_learning.html#ProxyEmbeddingLoss.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ncgenes7.losses.metric_learning.ProxyEmbeddingLoss.process" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the loss given inputs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>inputs</strong> – dict with input tensors</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>loss values</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>loss</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="ncgenes7-losses-object-detection-module">
<h2>ncgenes7.losses.object_detection module<a class="headerlink" href="#ncgenes7-losses-object-detection-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-ncgenes7.losses">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-ncgenes7.losses" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ncgenes7.metrics.html" class="btn btn-neutral float-right" title="ncgenes7.metrics package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ncgenes7.learning_rate_manipulators.html" class="btn btn-neutral float-left" title="ncgenes7.learning_rate_manipulators package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Audi Electronics Venture GmbH

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>